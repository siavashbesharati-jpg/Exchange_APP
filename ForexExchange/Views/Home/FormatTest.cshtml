@using ForexExchange.Extensions
@{
    ViewData["Title"] = "Currency Formatting Test";
}

<div class="container">
    <h2>Currency Formatting Test</h2>
    
    <div class="row">
        <div class="col-md-6">
            <h4>IRR (No Decimals)</h4>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Input</th>
                        <th>Formatted (Server)</th>
                        <th>Formatted (JS)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1234567.89</td>
                        <td>@((decimal)1234567.89).FormatCurrency("IRR")</td>
                        <td><span class="js-format" data-amount="1234567.89" data-currency="IRR"></span></td>
                    </tr>
                    <tr>
                        <td>33.0000</td>
                        <td>@((decimal)33.0000).FormatCurrency("IRR")</td>
                        <td><span class="js-format" data-amount="33.0000" data-currency="IRR"></span></td>
                    </tr>
                    <tr>
                        <td>1.05000</td>
                        <td>@((decimal)1.05000).FormatCurrency("IRR")</td>
                        <td><span class="js-format" data-amount="1.05000" data-currency="IRR"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="col-md-6">
            <h4>USD (Up to 3 Decimals, No Trailing Zeros)</h4>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Input</th>
                        <th>Formatted (Server)</th>
                        <th>Formatted (JS)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1.05000</td>
                        <td>@((decimal)1.05000).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="1.05000" data-currency="USD"></span></td>
                    </tr>
                    <tr>
                        <td>33.0000</td>
                        <td>@((decimal)33.0000).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="33.0000" data-currency="USD"></span></td>
                    </tr>
                    <tr>
                        <td>1.2346</td>
                        <td>@((decimal)1.2346).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="1.2346" data-currency="USD"></span></td>
                    </tr>
                    <tr>
                        <td>1.2341</td>
                        <td>@((decimal)1.2341).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="1.2341" data-currency="USD"></span></td>
                    </tr>
                    <tr>
                        <td>1.2345</td>
                        <td>@((decimal)1.2345).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="1.2345" data-currency="USD"></span></td>
                    </tr>
                    <tr>
                        <td>1234.5678</td>
                        <td>@((decimal)1234.5678).FormatCurrency("USD")</td>
                        <td><span class="js-format" data-amount="1234.5678" data-currency="USD"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Apply JavaScript formatting to test elements
    document.querySelectorAll('.js-format').forEach(function(element) {
        const amount = parseFloat(element.getAttribute('data-amount'));
        const currency = element.getAttribute('data-currency');
        element.textContent = formatCurrency(amount, currency);
    });
});
</script>
