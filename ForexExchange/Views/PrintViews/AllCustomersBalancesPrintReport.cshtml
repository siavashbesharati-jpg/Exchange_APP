@model List<ForexExchange.Models.AllCustomerBalancePrintViewModel>
@inject ForexExchange.Services.ISettingsService SettingsService
@{
    ViewData["Title"] = "Ú¯Ø²Ø§Ø±Ø´ ØªØ±Ø§Ø² Ù‡Ù…Ù‡ Ù…Ø´ØªØ±ÛŒØ§Ù†";
    Layout = null; // Print-friendly
    var websiteName = await SettingsService.GetWebsiteNameAsync();
    var companyName = await SettingsService.GetCompanyNameAsync();
    var companyWebsite = await SettingsService.GetCompanyWebsiteAsync();
    var logoDataUrl = await SettingsService.GetLogoDataUrlAsync();
}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - @websiteName</title>
    <link rel="icon" type="image/png" href="@logoDataUrl">
    <link rel="shortcut icon" href="@logoDataUrl">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; direction: rtl; background: #f8f9fa; color: #333; font-size: 12px; }
        .receipt-container { max-width: 1000px; margin: 20px auto; background: white; box-shadow: 0 0 20px rgba(0,0,0,0.1); border: 2px solid #ddd; }
        .receipt-header { background: #001f4d; color: white; padding: 15px 20px; display: flex; align-items: center; gap: 15px; }
        .company-logo img { width: 32px; height: 32px; border-radius: 50%; }
        .company-info { flex: 1; }
        .company-name { font-size: 20px; font-weight: bold; }
        .company-website { font-size: 12px; opacity: 0.9; }
        .report-title { font-size: 18px; font-weight: bold; margin-right: auto; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        .table th { background: #f8f9fa; }
        .customer-row { background: #f0f4ff; font-weight: bold; }
        .balance-positive { color: #27ae60; }
        .balance-negative { color: #e74c3c; }
        .footer { background: #2c3e50; color: white; padding: 10px 20px; text-align: center; font-size: 11px; }
    @@media print { body { background: white; } .receipt-container { box-shadow: none; border: 1px solid #000; } .footer { background: #2c3e50 !important; } .no-print { display: none !important; } }
    </style>
</head>
<body>
    <div class="receipt-container">
        <div class="receipt-header">
            <div class="company-logo"><img src="@logoDataUrl" alt="Ù„ÙˆÚ¯Ùˆ @companyName" /></div>
            <div class="company-info">
                <div class="company-name">@companyName</div>
                <div class="company-website">@companyWebsite</div>
            </div>
            <div class="report-title">Ú¯Ø²Ø§Ø±Ø´ ØªØ±Ø§Ø² Ù‡Ù…Ù‡ Ù…Ø´ØªØ±ÛŒØ§Ù†</div>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ</th>
                    <th>Ú©Ø¯ Ù…Ø´ØªØ±ÛŒ</th>
                    <th>Ø§Ø±Ø²</th>
                    <th>ØªØ±Ø§Ø²</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    int row = 1;
                    foreach (var customer in Model)
                    {
                        foreach (var bal in customer.Balances)
                        {
                            <tr>
                                <td>@row</td>
                                <td>@customer.FullName</td>
                                <td>@customer.CustomerId</td>
                                <td>@bal.CurrencyCode</td>
                                <td class="@(bal.Balance >= 0 ? "balance-positive" : "balance-negative")">@String.Format(bal.CurrencyCode == "IRR" ? "{0:N0}" : "{0:N2}", bal.Balance)</td>
                            </tr>
                            row++;
                        }
                    }
                }
                else
                {
                    <tr><td colspan="5">Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td></tr>
                }
            </tbody>
        </table>
        <div class="footer">
            <strong>ØªØ§Ø±ÛŒØ® Ú†Ø§Ù¾:</strong> @DateTime.Now.ToString("yyyy/MM/dd HH:mm:ss") |
            <strong>Ú©Ø§Ø±Ø¨Ø±:</strong> @(User.FindFirst("FullName")?.Value ?? User.Identity?.Name ?? "Ù†Ø§Ù…Ø´Ø®Øµ")<br />
            Ø§ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ù…Ø¶Ø§ Ù†Ø¯Ø§Ø±Ø¯ â€¢ ØµØ­Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ @companyName Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø³Øª â€¢ @companyWebsite
        </div>
    </div>
    <div style="text-align: center; margin: 20px; padding: 20px;" class="no-print">
        <button onclick="window.print()" style="background: #27ae60; color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 14px; cursor: pointer; margin: 0 10px;">ğŸ–¨ï¸ Ú†Ø§Ù¾ Ú¯Ø²Ø§Ø±Ø´</button>
        <button onclick="window.close()" style="background: #e74c3c; color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 14px; cursor: pointer; margin: 0 10px;">âœ–ï¸ Ø¨Ø³ØªÙ†</button>
    </div>
</body>
</html>
